
<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UC Ghor</title>
    <style>
        /* CSS কোড অপরিবর্তিত রাখা হয়েছে */
        :root {
            --primary-color: #4CAF50; /* Green */
            --secondary-color: #FFFFFF; /* White */
            --text-color: #333333;
            --light-gray: #f4f4f4;
            --dark-text: #555;
            --box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            --pending-color: #ff9800; /* Orange */
            --completed-color: #4caf50; /* Green */
        }
        body { font-family: Arial, sans-serif; margin: 0; padding: 70px 0 80px 0; background-color: var(--light-gray); }
        .header { background-color: var(--primary-color); color: var(--secondary-color); padding: 15px; display: flex; justify-content: space-between; align-items: center; position: fixed; top: 0; width: calc(100% - 30px); z-index: 1001; }
        .header .logo { font-size: 1.8em; font-weight: bold; }
        .header .menu-button { background: none; border: none; color: var(--secondary-color); font-size: 2em; cursor: pointer; }
        .side-menu { position: fixed; top: 0; right: -280px; width: 250px; height: 100%; background-color: #333; color: white; transition: right 0.3s ease; z-index: 1003; padding: 15px; }
        .side-menu.active { right: 0; }
        .side-menu .close-btn { font-size: 2.5em; cursor: pointer; margin-bottom: 20px; }
        .side-menu ul { list-style: none; padding: 0; }
        .side-menu ul li a { display: block; padding: 15px 10px; color: white; text-decoration: none; font-size: 1.2em; border-bottom: 1px solid #555; }
        .container { padding: 15px; }
        .banner { width: 100%; border-radius: 8px; margin-bottom: 20px; }
        .section-title { text-align: center; font-size: 1.5em; color: var(--primary-color); margin-bottom: 20px; font-weight: bold; }
        .product-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; }
        .product-card { background-color: var(--secondary-color); border-radius: 8px; box-shadow: var(--box-shadow); text-align: center; cursor: pointer; transition: transform 0.2s; overflow: hidden; }
        .product-card:hover { transform: translateY(-5px); }
        .product-card img { width: 100%; height: 100px; object-fit: cover; }
        .product-card .info { padding: 10px; }
        .product-card h3 { margin: 0; font-size: 1.1em; }
        .modal { display: none; position: fixed; z-index: 1002; left: 0; top: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.6); justify-content: center; align-items: center; }
        .modal-content { background-color: #fefefe; padding: 20px; width: 90%; max-width: 500px; border-radius: 10px; position: relative; max-height: 80vh; overflow-y: auto; }
        .modal-close { color: #aaa; position: absolute; top: 10px; right: 20px; font-size: 28px; font-weight: bold; cursor: pointer; }
        #product-list-modal .product-plan { display: flex; justify-content: space-between; align-items: center; padding: 12px 8px; border-bottom: 1px solid var(--light-gray); }
        #product-list-modal .buy-button { background-color: var(--primary-color); color: white; padding: 8px 15px; border: none; border-radius: 5px; cursor: pointer; }
        #payment-form .info-display { background: #f0f0f0; padding: 10px; border-radius: 5px; margin-bottom: 15px; }
        #payment-form input { width: calc(100% - 22px); padding: 10px; margin-top: 5px; border-radius: 5px; border: 1px solid #ccc; }
        #submit-payment { width: 100%; padding: 12px; background-color: var(--primary-color); color: white; border: none; border-radius: 5px; font-size: 1.2em; cursor: pointer; margin-top: 15px; }
        .history-item { padding: 10px; border-bottom: 1px solid #eee; }
        .history-item .status { font-weight: bold; }
        .history-item .status.pending { color: var(--pending-color); }
        .history-item .status.completed { color: var(--completed-color); }
        #profile-view img { width: 80px; height: 80px; border-radius: 50%; margin-bottom: 15px; }
        #profile-view { text-align: center; }
        .telegram-login-btn { background-color: #54A9EB; color: white; border: none; padding: 12px 20px; border-radius: 5px; font-size: 1em; cursor: pointer; }
        .bottom-nav { position: fixed; bottom: 0; left: 0; width: 100%; height: 60px; background-color: white; display: flex; justify-content: space-around; align-items: center; box-shadow: 0 -2px 10px rgba(0,0,0,0.1); z-index: 1000; }
        .nav-item { display: flex; flex-direction: column; align-items: center; color: var(--dark-text); text-decoration: none; font-size: 0.8em; cursor: pointer; }
        .nav-item .icon { font-size: 1.5em; margin-bottom: 2px; }
    </style>
</head>
<body>

    <!-- HTML অংশ প্রায় অপরিবর্তিত, শুধুমাত্র মোডাল কন্টেন্ট আপডেট করা হয়েছে -->
    <header class="header">
        <div class="logo">UC GHOR</div>
        <button class="menu-button" id="menuBtn">&#9776;</button>
    </header>
    <div class="side-menu" id="sideMenu">
        <span class="close-btn" id="closeMenuBtn">&times;</span>
        <ul>
            <li><a href="#">যোগাযোগ</a></li>
            <li><a href="#">আমাদের সম্পর্কে</a></li>
        </ul>
    </div>
    <main class="container">
        <img src="https://i.ibb.co/Yd4BvY0/banner.png" alt="Banner" class="banner">
        <h2 class="section-title">আমাদের সার্ভিসসমূহ</h2>
        <div class="product-grid"></div>
    </main>
    <nav class="bottom-nav">
        <a href="#" class="nav-item"><span class="icon">&#8962;</span> Home</a>
        <div id="addMoneyBtn" class="nav-item"><span class="icon">&#10010;</span> Add Money</div>
        <div id="myOrdersBtn" class="nav-item"><span class="icon">&#8635;</span> My Orders</div>
        <div id="myAccountBtn" class="nav-item"><span class="icon">&#128100;</span> My Account</div>
    </nav>
    
    <!-- Modals -->
    <div id="product-list-modal" class="modal"><div class="modal-content"><span class="modal-close">&times;</span><h2 id="product-list-title"></h2><div id="product-plans-container"></div></div></div>
    <div id="payment-modal" class="modal"><div class="modal-content"><span class="modal-close">&times;</span><h2>পেমেন্ট পেজ</h2><form id="payment-form"><!-- Form content remains the same --></form></div></div>
    
    <!-- অর্ডার হিস্টরি মোডাল -->
    <div id="order-history-modal" class="modal">
        <div class="modal-content">
            <span class="modal-close">&times;</span>
            <h2>আমার অর্ডার হিস্টরি</h2>
            <div id="order-history-list">
                <!-- Orders will be dynamically inserted here -->
            </div>
        </div>
    </div>

    <!-- প্রোফাইল মোডাল -->
    <div id="profile-modal" class="modal">
        <div class="modal-content">
            <span class="modal-close">&times;</span>
            <h2>আমার প্রোফাইল</h2>
            <!-- This part will switch between login button and profile view -->
            <div id="profile-login-view">
                <p>আপনার টেলিগ্রাম অ্যাকাউন্টের সাথে যুক্ত হয়ে অর্ডার ট্র্যাক করুন।</p>
                <button id="telegramLoginBtn" class="telegram-login-btn">Login with Telegram</button>
            </div>
            <div id="profile-details-view" style="display: none;">
                <img id="profile-pic" src="" alt="Profile Picture">
                <h3 id="profile-name"></h3>
                <p id="profile-username"></p>
            </div>
        </div>
    </div>


    <script>
    document.addEventListener('DOMContentLoaded', () => {
        // --- কোডের এই অংশটি অপরিবর্তিত ---
        const menuBtn = document.getElementById('menuBtn');
        const sideMenu = document.getElementById('sideMenu');
        const productGrid = document.querySelector('.product-grid');
        const modals = document.querySelectorAll('.modal');
        const productListModal = document.getElementById('product-list-modal');
        const paymentModal = document.getElementById('payment-modal');
        const orderHistoryModal = document.getElementById('order-history-modal');
        const profileModal = document.getElementById('profile-modal');
        const addMoneyBtn = document.getElementById('addMoneyBtn');
        const myOrdersBtn = document.getElementById('myOrdersBtn');
        const myAccountBtn = document.getElementById('myAccountBtn');

        const products = {
            "Telegram": { name: "Telegram Premium", img: "https://i.ibb.co/j3nZ6wV/telegram.png", plans: [{ duration: "1 মাস", price: 3 }, { duration: "3 মাস", price: 7 }] },
            "YouTube": { name: "YouTube Premium", img: "https://i.ibb.co/8XY4SPB/youtube.png", plans: [{ duration: "1 মাস", price: 2 }, { duration: "3 মাস", price: 5 }] },
            "Facebook": { name: "Facebook Likes", img: "https://i.ibb.co/dGZvGAz/facebook.png", plans: [{ duration: "1000 Likes", price: 8 }] },
            "TikTok": { name: "TikTok Likes", img: "https://i.ibb.co/R4dYhM4/tiktok.png", plans: [{ duration: "1000 Likes", price: 5 }] },
            "FreeFire": { name: "FreeFire Diamonds", img: "https://i.ibb.co/L9H8Xqj/freefire.jpg", plans: [{ duration: "115 ডায়মন্ড", price: 1.2 }] }
        };

        // --- মূল কার্যকারিতা ---
        Object.keys(products).forEach(key => {
            const product = products[key];
            const card = document.createElement('div');
            card.className = 'product-card';
            card.dataset.product = key;
            card.innerHTML = `<img src="${product.img}" alt="${product.name}"><div class="info"><h3>${product.name}</h3></div>`;
            productGrid.appendChild(card);
        });

        menuBtn.addEventListener('click', () => sideMenu.classList.add('active'));
        document.getElementById('closeMenuBtn').addEventListener('click', () => sideMenu.classList.remove('active'));
        
        // --- নেভিগেশন বাটন ---
        addMoneyBtn.addEventListener('click', () => showPaymentModal({ product: "Add Money", plan: "Wallet Top-up", price: 10 }));
        myOrdersBtn.addEventListener('click', () => {
            displayOrderHistory();
            orderHistoryModal.style.display = 'flex';
        });
        myAccountBtn.addEventListener('click', () => {
            handleProfileView();
            profileModal.style.display = 'flex';
        });

        // --- প্রোডাক্ট এবং পেমেন্ট ফ্লো ---
        productGrid.addEventListener('click', (e) => {
            const card = e.target.closest('.product-card'); if (!card) return;
            // ... (Product list modal logic is unchanged)
        });

        // --- নতুন কার্যকারিতা: অর্ডার হিস্টরি ---
        function displayOrderHistory() {
            const orderHistoryList = document.getElementById('order-history-list');
            const orders = JSON.parse(localStorage.getItem('myOrders')) || [];
            orderHistoryList.innerHTML = ''; // Clear previous list

            if (orders.length === 0) {
                orderHistoryList.innerHTML = '<p>আপনি এখনো কোনো অর্ডার করেননি।</p>';
                return;
            }

            orders.reverse().forEach(order => {
                const item = document.createElement('div');
                item.className = 'history-item';
                item.innerHTML = `
                    <strong>প্রোডাক্ট:</strong> ${order.product} (${order.plan}) <br>
                    <span class="status ${order.status.toLowerCase()}">স্ট্যাটাস: ${order.status}</span>
                `;
                orderHistoryList.appendChild(item);
            });
        }
        
        // --- নতুন কার্যকারিতা: প্রোফাইল सिमुलेशन ---
        const telegramLoginBtn = document.getElementById('telegramLoginBtn');
        const profileLoginView = document.getElementById('profile-login-view');
        const profileDetailsView = document.getElementById('profile-details-view');

        function handleProfileView() {
            const isLoggedIn = localStorage.getItem('telegramLoggedIn') === 'true';
            if (isLoggedIn) {
                profileLoginView.style.display = 'none';
                profileDetailsView.style.display = 'block';
                // Load profile data (using dummy data for demo)
                document.getElementById('profile-pic').src = 'https://i.ibb.co/6PqfC2y/avatar.png';
                document.getElementById('profile-name').textContent = 'Prantoshil';
                document.getElementById('profile-username').textContent = '@prantoshil444';
            } else {
                profileLoginView.style.display = 'block';
                profileDetailsView.style.display = 'none';
            }
        }

        telegramLoginBtn.addEventListener('click', () => {
            // This is a simulation. A real implementation requires Telegram's Login Widget.
            localStorage.setItem('telegramLoggedIn', 'true');
            handleProfileView();
        });

        // --- টেলিগ্রাম বট সহ পেমেন্ট ফর্ম সাবমিট ---
        document.getElementById('payment-form').addEventListener('submit', function(e) {
            e.preventDefault();
            const botToken = 'YOUR_TELEGRAM_BOT_TOKEN';
            const chatId = 'YOUR_TELEGRAM_CHAT_ID';

            const productName = document.getElementById('payment-product-name').textContent;
            const planName = document.getElementById('payment-plan-name').textContent;
            const amount = document.getElementById('payment-amount').textContent;
            const trxId = document.getElementById('trx-id').value;
            const userId = document.getElementById('user-id').value;
            
            let message = `🔔 **নতুন অর্ডার** 🔔\n\n`;
            message += `📦 **প্রোডাক্ট:** ${productName}\n`;
            message += `📄 **প্ল্যান:** ${planName}\n`;
            message += `💵 **মূল্য:** $${amount}\n`;
            message += `🆔 **ইউজার আইডি:** ${userId}\n`;
            message += `💳 **ট্রানজেকশন আইডি:** ${trxId}`;

            const url = `https://api.telegram.org/bot${botToken}/sendMessage?chat_id=${chatId}&text=${encodeURIComponent(message)}&parse_mode=Markdown`;

            fetch(url).then(res => res.json()).then(data => {
                if (data.ok) {
                    alert('আপনার অর্ডারটি সফলভাবে পাঠানো হয়েছে!');
                    // Save order to local history
                    const orders = JSON.parse(localStorage.getItem('myOrders')) || [];
                    orders.push({ product: productName, plan: planName, status: 'Pending' });
                    localStorage.setItem('myOrders', JSON.stringify(orders));
                } else { throw new Error('Telegram API error'); }
            }).catch(error => {
                console.error(error);
                alert('দুঃখিত, কোনো সমস্যা হয়েছে।');
            }).finally(() => {
                paymentModal.style.display = 'none';
                this.reset();
            });
        });

        // Helper functions (unchanged)
        function showPaymentModal(data) { /* ... */ }
        modals.forEach(modal => { modal.addEventListener('click', (e) => { /* ... */ }); });
    });
    </script>
</body>
</html>
